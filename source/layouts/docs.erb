<% wrap_layout :'layout' do %>

  <%- pages = nav_pages(current_resource.url) -%>

  <main class="docs-page">
    <div class="content">

      <div class="docs-header-navigation">
        <a href="/docs/teacher" class="docs-header-navigation-item">
          <h2 class="navigation-header-student">Teacher</h2>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing edivt
          </p>
        </a>
        <a href="/docs/student" class="docs-header-navigation-item">
          <h2 class="navigation-header-teacher">Student</h2>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing edivt
          </p>
        </a>
        <a href="/docs/dashboard" class="docs-header-navigation-item">
          <h2 class="navigation-header-dashboard">Dashboard</h2>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing edivt
          </p>
        </a>
        <a href="/docs/ide" class="docs-header-navigation-item">
          <h2 class="navigation-header-ide">IDE</h2>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing edivt
          </p>
        </a>
      </div>

      <aside id="docs-menu">
        <ul>
          <% pages.each do |resource| %>
            <li>
              <ul>
                <% ordered(resource).each do |child| %>
                  <li>
                    <% active = current_section?(child.url) ? "active" : "" %>
                    <div class="<%= active %> item">
                      <div class="item-header">
                      <% if ordered(child).length > 0 %>
                        <%= child.data.title %>
                        </div>
                      <% else %>
                        <%=  link_to child.data.title, child.url %>
                        </div>
                        <p class="item-description">
                          <%= child.data.description %>
                        </p>
                      <% end %>
                    </div>
                    <ul class="<%= active %>">
                      <% ordered(child).each do |p| %>
                        <% if current_section? p.url %>
                          <li class="active">
                            <%=  link_to p.data.title, p.url %>
                            <% if p.children.length > 0 %>
                              <ul>
                                <% ordered(p).each do |inner| %>
                                  <% if current_page? inner.url %>
                                    <li class="active">
                                  <% else %>
                                      <li>
                                  <% end %>
                                  <%= link_to inner.data.title, inner.url %></li>
                                <% end %>
                              </ul>
                            <% end %>
                        <% else %>
                            <li>
                              <%=  link_to p.data.title, p.url %>
                        <% end %>
                            </li>
                      <% end %>
                    </ul>
                </li>
                <% end %>
              </ul>
          </li>
          <% end %>
        </ul>
      </aside>

      <article>
        <h1>
          <%= current_resource.data.title %>
        </h1>
        <%= yield %>
      </article>
    </div>
  </main>
<% end %>

<%= partial "vendors/swiftype" %>
